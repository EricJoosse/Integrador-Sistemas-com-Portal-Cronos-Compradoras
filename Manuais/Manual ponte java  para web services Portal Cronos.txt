carlos.etsouza@gmail.com


A. Uso da ponte sem MS-DOS:
===========================

Carlos Eduardo, boa tarde!
 
  a "ponte" Java está disponível. Já testei esta ponte agorinha e funcionou. para evitar bloqueio de anexos de arquivos .jar por providores de email,
a ponte está disponível para download no link http://52.170.47.238/ponte-integracao-pcronos-1.0.0.jar
 
É só chamar o método "uploadStringXML" na classe "PonteWebServicesPortalCronos"  na package "pcronos.integracao.comprador".
Parâmetros: String url, String stringXML, String usuario, String senha.
Este método retorna um objeto de tipo pcronos.integracao.comprador.RetornoWebServiceDTO com os seguintes campos:
  - String StatusCodeHTTP: pode ser 200, 202, ....., veja o manual de Integração
  - String MensagensXML: string XML com a lista de eventuais erros que pode estar vazio, 
apenas repassando o retorno do web service, veja o manual de Integração.
 
Observação: na versão atual da ponte não chame o método "main".
 
Espero que vocês já têm uma infra-estrutura pronta, dentro ou fora do Datasul, para executar qualquer método java em qualquer arquivo .jar diferente de métodos "main". 
Caso contrário, vocês vão ter que criar esta infraestrutura> Se precisar poss ajudar com isso, talvez até conectado via AnyDesk. 
 
Então minha dúvida é se vocês já têm uma infraestrutura?
 
Atc,
Eric
 
 
A. Uso da ponte com MS-DOS:
===========================

cd\
cd dir1
cd dir2
.......
REM Antigo - com diretórios flexíveis:
REM "%JAVA_HOME%\bin\java.exe"   -cp  ponte-integracao-pcronos-2.1.0.jar  pcronos.integracao.comprador.PonteWebServicesPortalCronos  "url"   usuario  senha  "dirMaisNomeArqUploadXML"   "dirMaisNomeArqRetornoXML"   "dirMaisNomeArqRetornoStatusCodeHTTP"
 
REM Versão atual - com um único diretório fixo:
"%JAVA_HOME%\bin\java.exe"  -cp  ponte-integracao-pcronos-2.1.0.jar  pcronos.integracao.comprador.PonteWebServicesPortalCronos  "url"   usuario  senha  NomeArqUploadXML   NomeArqRetornoXML   ArqRetornoStatusCodeHTTP


Exemplo:
--------
"%JAVA_HOME%\bin\java.exe"  -cp  ponte-integracao-pcronos-2.1.0.jar  pcronos.integracao.comprador.PonteWebServicesPortalCronos "http://www.portalcronos.com.br:81/v2/api/Requisicao/PostFileRequisicao" ws-sjcc 123456 req_10798130000175_243680_20200724_145856.xml Ret_10798130000175_243680_20200724_145856.xml Status_10798130000175_243680_20200724_145856.txt
REM Descomentar o seguinte para testar ou debugar os arquivos de retorno:
REM echo.
REM type C:\ProgramData\PortalCronos\Ret_10798130000175_243680_20200724_145856.xml
REM type C:\ProgramData\PortalCronos\Status_10798130000175_243680_20200724_145856.txt

 
Observações:
------------
1. O parâmetro "url" deve ser passado com aspas duplas, veja o exemplo acima;
 
2. Dentro do parâmetro "url" é melhor usar os caracteres /  e não \ para não precisar de "escape characters".
 
3. A ponte Java é independente do web service do Portal Cronos e pode ser usado
    para upload de qualquer arquivo XML para qualquer web service do Portal Cronos
    como por exemplo "PostFileRequisicao", "PostFileRecebimentoOrdemCompra", "PostFileSituacaoOrdemCompra", etc.
 
4. Na versão atual da ponte o diretório para os 3 tipos de arquivos é um diretório único e um diretório fixo no programa. 
   O diretório fixo é C:/ProgramData/PortalCronos/ e não é C:/temp/ para evitar prejuizos graves e até paradas impeditivas 
   da integração no futuro.
   